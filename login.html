<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>eMercado - Todo lo que busques está aquí</title>
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <style>
    body {
      background-color: rgb(248, 249, 250);
    }
  </style>
</head>

<body>
  <main class="mt-5">
    <div class="container">
      <div class="login-container" >
        <div class="image-container">
          <img src="img/login.png" class="img-log">
        </div>
        <h2>Inicio de sesión</h2>
        <div class="log-cont">
         <form id="form">		
          <label for="name" class="label">Email</label>
          <br>
          <input type="email" id="input-email" required>
          <br><br>
          <label for="name" class="label">Contraseña</label>
          <br>
          <input type="password" id="input-password" required>
          <br>
          <button id="btnlogin">Ingresar</button>
         </form>
        </div>
        <button id="google">Ingresar con Google</button>
      </div>
    </div>
  </main>
  <footer class="text-muted">
    <div class="container">
      <p class="float-end">
        <a href="#">Volver arriba</a>
      </p>
      <p>Este sitio forma parte de <a href="https://jovenesaprogramar.edu.uy/" target="_blank">Jovenes a Programar</a> -
        2022</p>
      <p>Clickea <a target="_blank" href="Letra.pdf">aquí</a> para descargar la letra del obligatorio.</p>
    </div>
  </footer>
  <script src="js/login.js"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getAuth ,GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC9FqtLkzyMPcoW8rK78uXjyp4faHvESVE",
      authDomain: "japlogin-362200.firebaseapp.com",
      projectId: "japlogin-362200",
      storageBucket: "japlogin-362200.appspot.com",
      messagingSenderId: "261059380792",
      appId: "1:261059380792:web:a199e7ae59502a425088cd"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider(app);

    google.addEventListener("click", function (e) {
  
signInWithPopup(auth, provider)
  .then((result) => {
    // This gives you a Google Access Token. You can use it to access the Google API.
    const credential = GoogleAuthProvider.credentialFromResult(result);
    const token = credential.accessToken;
    // The signed-in user info.
    const user = result.user;

    localStorage.setItem("email", user.email);
    window.location.href = "index.html";
    // ...
  }).catch((error) => {
    // Handle Errors here.
    const errorCode = error.code;
    const errorMessage = error.message;
    // The email of the user's account used.
    const email = error.customData.email;
    // The AuthCredential type that was used.
    const credential = GoogleAuthProvider.credentialFromError(error);
    // ...
  });

    });

  </script>
</body>

</html>